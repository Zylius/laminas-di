<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Automated dependency injection for PSR-11 containers"> 

    
    
        
    
    <meta name="docsearch:version" content="3.0.0,latest">
    <meta name="docsearch:language" content="en">
    <meta name="docsearch:component" content="laminas-di">

    <link rel="canonical" href="https://docs.laminas.dev/laminas-di/v3/config/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>Configuration - laminas-di - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="components" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown sub-project-selector">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a href="https://docs.mezzio.dev/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mezzio-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Mezzio</strong><br>
                                        PSR-15 Middleware in Minutes
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/components/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-components-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Components</strong><br>
                                        Components for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/mvc" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mvc-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>MVC</strong><br>
                                        MVC for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://api-tools.getlaminas.org/documentation" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-api-tools-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>API Tools</strong><br>
                                        Build RESTful APIs in Minutes
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/migration/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Migration to Laminas
                                    </div>
                                </div>
                            </a>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/tutorials/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Tutorials
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">laminas-di</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../intro/" class="subnavigation__link">Introduction</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../installation/" class="subnavigation__link">Installation</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../quick-start/" class="subnavigation__link">Quick Start</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../psr-11/" class="subnavigation__link">PSR-11 Support</a>
    </li>

                    
                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Configuration</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../injector/" class="subnavigation__link">Injector</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../codegen/" class="subnavigation__link">Code Generator</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Cookbook</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../cookbook/use-with-psr-containers/" class="subnavigation__link">Usage with PSR-11 Containers</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../cookbook/use-with-servicemanager/" class="subnavigation__link">Usage with laminas-servicemanager</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../cookbook/aot-guide/" class="subnavigation__link">Using AoT with Mezzio and laminas-servicemanager</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Migration</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/" class="subnavigation__link">Migration from Version 2 to 3</a>
    </li>

            
        </ul>
    </li>

                    
                
            

                
                

                    
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-di</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-right">
                
                    
<div class="version-selector">
    <div class="btn-group">
        <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" data-display="static" aria-haspopup="true" aria-expanded="false" id="version-selector-dropdown">
            
                v3
            
        </button>
        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" aria-labelledby="version-selector-dropdown">
            
                
                    <a href="../intro/" class="dropdown-item active">
                        
                            v3 (latest)
                        
                    </a>
                
            
                
                    <a href="../../v2/quick-start/" class="dropdown-item">
                        
                            v2
                        
                    </a>
                
            
        </div>
    </div>
</div>


                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-di" class="header__link header__link--github" title="Go to repository of laminas-di">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#type-preferences" class="toc__link nav-link">Type Preferences</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#parameters" class="toc__link nav-link">Parameters</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#aliases" class="toc__link nav-link">Aliases</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="../..">laminas-di</a></li>

                
                    
                        
                        
                    
                

                <li class="breadcrumb-item active" aria-current="page">Configuration</li>
            
        
    </ol>
</nav>






    
    

    <h1 id="configuration">Configuration</h1>
<p>Configuration detailing how types are constructed and dependencies should be
resolved can be provided as an associative array when instantiating
<code>Laminas\Di\Config</code>. A type may be an actual class name or an alias to a class
name.</p>
<p>The configuration array respects the following keys (unknown keys are ignored):</p>
<ul>
<li>
<p><code>preferences</code>: Associative nested array that maps class or interface names to
  a service name that should be used to provide a dependency. See the
  <a href="#type-preferences">Type Preferences</a> section below for details.</p>
</li>
<li>
<p><code>types</code>: Associative array defining how classes or aliases should be
  constructed. Each key in this array is a class or alias name, and its value is
  another associative array with the following keys:</p>
</li>
<li>
<p><code>preferences</code>: The same as <code>preferences</code> above, but only for the associated
    class.</p>
</li>
<li>
<p><code>parameters</code>: Associative array declaring the values to inject for the
    declared construction parameters.  Each key is the parameter name as
    declared in the constructor method of the associated class name. See the
    <a href="#parameters">Parameters</a> section below for details.</p>
</li>
<li>
<p><code>typeOf</code>: String that contains a class name. It declares that the
    associated key is an alias of the given class name. This class must exist.
    It cannot be another alias.</p>
</li>
</ul>
<p>Below is an example of injector configuration.</p>
<pre class="highlight"><code class="language-php">$config = new \Laminas\Di\Config([
    // Declares global preferences to use when resolving
    // dependencies of the specified type
    'preferences' =&gt; [
        // A map of classname =&gt; preferred type
        MyInterface::class =&gt; MyImplementation::class,
    ],

    // Declares how types should be constructed.
    // This also allows declaring aliases of a specific class
    'types' =&gt; [
        ClassName::class =&gt; [
            // Declaration in the same way as global preferences
            // but these will apply when the type of the associated key
            // should be instantiated
            'preferences' =&gt; [],

            // Constructor parameters to inject. This option will define
            // the injections directly by the parameter name of the constructor
            // used as key.
            //
            // If the parameter is type-hinted by a class/interface name, you can
            // provide the injection by string. The injector will use the IoC
            // container to obtain it.
            'parameters' =&gt; [
                'foo' =&gt; 'bar',
            ],
        ],

        // Define an alias
        'Alias.Name' =&gt; [
            'typeOf' =&gt; ClassName::class,

            'preferences' =&gt; [],
            'parameters' =&gt; [],
        ],
    ],
]);</code></pre>
<h2 id="type-preferences">Type Preferences</h2>
<p>In many cases, you might be using interfaces as type hints as opposed to
concrete types. Even though type preferences are not limited to interfaces or
abstract class names, they provide hints to the injector on how such types
should be resolved.</p>
<p>The resolver will look up the name finally passed to the container in the
following way (the first match will be used):</p>
<ol>
<li>The preference defined in the type configuration of  the class if it satifies
   the typehint (implements, extends, or typeOf).</li>
<li>If there is a global preference defined and it satisfies the typehint.</li>
<li>Use the typehinted name directly.</li>
</ol>
<pre class="highlight"><code class="language-php">// Assume the following classes are declared:

interface FooInterface
{}

class Foo implements FooInterface
{}

class SpecialFoo implements FooInterface
{}

class Bar
{}

class MyClass
{
    public function __construct(FooInterface $foo)
    {
        // ...
    }
}

// With the following configuration:

use Laminas\Di\Injector;
use Laminas\Di\Config;

$injector = new Injector(new Config([
    'preferences' =&gt; [
        FooInterface::class =&gt; Foo::class,
    ],
    'types' =&gt; [
        'MyClass.A' =&gt; [
            'typeOf' =&gt; MyClass::class,
            'preferences' =&gt; [
               FooInterface::class =&gt; SpecialFoo::class,
            ],
        ],
        'MyClass.B' =&gt; [
            'typeOf' =&gt; MyClass::class,
            'preferences' =&gt; [
               FooInterface::class =&gt; Bar::class,
            ],
        ],
    ],
]));


// The results are:
$a = $injector-&gt;create(MyClass::class); // Constructed with Foo
$b = $injector-&gt;create('MyClass.A'); // Constructed with SpecialFoo
$c = $injector-&gt;create('MyClass.B'); // Constructed with Foo (since Bar does not satisfy FooInterface)</code></pre>
<h2 id="parameters">Parameters</h2>
<p>In contrast to type preferences, the resolver will not perform checks if the
provided value satisfies the required type. It will be used directly to inject
the value.</p>
<p>There are several ways to define injections.</p>
<ul>
<li>
<p>An IoC container service name as string: This is only possible if the required
  type is a class or interface. For other types (scalars, <code>iterable</code>,
  <code>callable</code>, etc) or typeless parameters, the string value is passed <strong>as is</strong>.</p>
</li>
<li>
<p>An instance of <code>Laminas\Di\Resolver\ValueInjection</code>: Injects the value returned
  by <code>getValue()</code> as is.</p>
</li>
<li>
<p>An instance of <code>Laminas\Di\Resolver\TypeInjection</code>: Obtains the injected value
  from the IoC container by passing the return value of <code>getType()</code> to the
  container's <code>get()</code> method.</p>
</li>
<li>
<p>The string literal <code>'*'</code>: This requests the injector to ignore any previously
  defined parameter and use the type preference resolution as described in
  <a href="#type-preferences">Type Preferences</a>.</p>
</li>
<li>
<p>Any other value will be used as is and encapsulated in a
  <code>Laminas\Di\Resolver\ValueInjection</code>. If the provided value's type does not fit
  the required parameter type, an exception is thrown.</p>
</li>
</ul>
<h2 id="aliases">Aliases</h2>
<p>Aliases allow you to configure the same class with different construction
options. Aliases can directly be created with the injector or declared as type
preferences.</p>
<p>An alias must refer to an actual class or an interface, therefore you cannot
declare aliases for another alias.</p>
<p>For example the following class should be instantiated in two different ways:</p>
<pre class="highlight"><code class="language-php">// Assume the following classes are declared:

class Foo
{}

class SpecialFoo extends Foo
{}

class MyClass
{
    public function __construct(Foo $foo, string $bar)
    {
        // ...
    }
}

// With the following injection config:

use Laminas\Di\Injector;
use Laminas\Di\Config;

$injector = new Injector(new Config([
    'types' =&gt; [
        MyClass::class =&gt; [
            'parameters' =&gt; [
               'foo' =&gt; SpecialFoo::class,
               'bar' =&gt; 'Stringvalue',
            ],
        ],
        'MyClass.Alias' =&gt; [
            'typeOf' =&gt; MyClass::class,
            'parameters' =&gt; [
               'foo' =&gt; '*',
               'bar' =&gt; 'Stringvalue',
            ],
        ],
    ],
]));

// The results are:
$a = $injector-&gt;create(MyClass::class); // Constructed with SpecialFoo
$b = $injector-&gt;create('MyClass.Alias'); // Constructed with Foo (since there are no type preferences for Foo)</code></pre>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../psr-11/">
                    <small class="page-nav__label">Previous</small>
                    <i class="fa fa-chevron-left"></i>
                    PSR-11 Support
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../injector/">
                    <small class="page-nav__label">Next</small>
                    Injector
                    <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>



                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                <div class="donation-banner">
    <a href="https://getlaminas.org/support/">
        <h2>Donate</h2>
        <p>Support Laminas Developers Directly</p>
        <img src="https://funding.communitybridge.org/assets/cb-f-horizontal-white.svg">
    </a>
</div>

                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../..">laminas-di</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../intro/" class="subnavigation__link">Introduction</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../installation/" class="subnavigation__link">Installation</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../quick-start/" class="subnavigation__link">Quick Start</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../psr-11/" class="subnavigation__link">PSR-11 Support</a>
    </li>

                    
                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Configuration</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../injector/" class="subnavigation__link">Injector</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../codegen/" class="subnavigation__link">Code Generator</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Cookbook</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../cookbook/use-with-psr-containers/" class="subnavigation__link">Usage with PSR-11 Containers</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../cookbook/use-with-servicemanager/" class="subnavigation__link">Usage with laminas-servicemanager</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../cookbook/aot-guide/" class="subnavigation__link">Using AoT with Mezzio and laminas-servicemanager</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Migration</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../migration/" class="subnavigation__link">Migration from Version 2 to 3</a>
    </li>

            
        </ul>
    </li>

                    
                
            

                
                

                    
                    
                
            
        </ul>
    </div>

                    
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-di/blob/-/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-di/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2023 <a href="https://getlaminas.org/">Laminas Project</a> a Series of LF Projects, LLC.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '../..',
            project  = "components",
            siteName = 'laminas-di';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-di" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
